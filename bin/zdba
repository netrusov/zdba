#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/zdba'

config = ::ZDBA::Config.new(::ARGV[0])

::ZDBA.logger.level = config[:logger][:level]
::ZDBA.logger.formatter = ::ZDBA::LogFormatters::JSON.new if config[:logger][:json]

config[:require]&.each do |path|
  require path
end

::ZDBA::Manager.new(config).run
